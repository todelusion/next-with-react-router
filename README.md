# Next.js + React Router æ··åˆè·¯ç”±ç¯„ä¾‹

é€™å€‹å°ˆæ¡ˆå±•ç¤ºäº†å¦‚ä½•åœ¨ Next.js å°ˆæ¡ˆä¸­åŒæ™‚ä½¿ç”¨ Next.js çš„ Pages Router å’Œ React Routerï¼Œå¯¦ç¾æ›´éˆæ´»çš„è·¯ç”±ç®¡ç†æ–¹æ¡ˆã€‚

## ğŸŒŸ ç‰¹è‰²

- Next.js Pages Router ç”¨æ–¼å‚³çµ±çš„é é¢è·¯ç”±
- React Router ç”¨æ–¼ SPAï¼ˆå–®é æ‡‰ç”¨ï¼‰é«”é©—
- å…©ç¨®è·¯ç”±ç³»çµ±çš„ç„¡ç¸«æ•´åˆ
- å®Œæ•´çš„ TypeScript æ”¯æ´
- Tailwind CSS æ¨£å¼è¨­è¨ˆ

## ğŸ” å°ˆæ¡ˆçµæ§‹

```
src/
â”œâ”€â”€ components/         # React çµ„ä»¶
â”œâ”€â”€ layouts/           # å¸ƒå±€çµ„ä»¶
â”œâ”€â”€ pages/             # Next.js é é¢
â”‚   â”œâ”€â”€ _app.tsx      # Next.js æ‡‰ç”¨å…¥å£
â”‚   â”œâ”€â”€ _document.tsx # Next.js æ–‡æª”è¨­ç½®
â”‚   â”œâ”€â”€ doc.tsx       # æ–‡æª”é é¢
â”‚   â”œâ”€â”€ index.tsx     # é¦–é 
â”‚   â””â”€â”€ spa.tsx       # SPA å…¥å£
â”œâ”€â”€ routes/            # React Router è·¯ç”±çµ„ä»¶
â”‚   â”œâ”€â”€ About.tsx
â”‚   â”œâ”€â”€ AppRoutes.tsx # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ Contact.tsx
â”‚   â””â”€â”€ Home.tsx
â””â”€â”€ styles/           # æ¨£å¼æ–‡ä»¶
    â””â”€â”€ globals.css   # å…¨åŸŸæ¨£å¼
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

1. è¤‡è£½å°ˆæ¡ˆ
```bash
git clone https://github.com/todelusion/next-with-react-router.git
cd next-with-react-router
```

2. å®‰è£ä¾è³´
```bash
npm install
# æˆ–
yarn install
```

3. å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨
```bash
npm run dev
# æˆ–
yarn dev
```

## ğŸ“– è·¯ç”±ç³»çµ±èªªæ˜

### Next.js Pages Router
- ä½æ–¼ `src/pages` ç›®éŒ„
- æä¾›å‚³çµ±çš„å¤šé é¢æ‡‰ç”¨é«”é©—
- æ”¯æ´ä¼ºæœå™¨ç«¯æ¸²æŸ“èˆ‡éœæ…‹ç”Ÿæˆ (SSR/SSG)
- ä½¿ç”¨ `<Link>` å…ƒä»¶æ”¯æ´å®¢æˆ¶ç«¯å°èˆª
- é©åˆéœ€è¦ SEO çš„é é¢ï¼ˆå¦‚é¦–é ã€ç”¢å“é ï¼‰

### React Router (SPA)
- ä½æ–¼ `src/routes` ç›®éŒ„
- æä¾›æµæš¢çš„å–®é æ‡‰ç”¨é«”é©—
- å®Œå…¨å®¢æˆ¶ç«¯è·¯ç”±ï¼Œåˆ‡æ›é é¢ä¸æœƒé‡æ–°è¼‰å…¥
- é©åˆè¤‡é›œçš„å‰ç«¯äº’å‹•ï¼ˆå¦‚å¾Œå°ç®¡ç†ä»‹é¢ï¼‰
- ç¯„ä¾‹è·¯ç”±ï¼š
  - `/spa` - SPA é¦–é 
  - `/spa/about` - é—œæ–¼é é¢
  - `/spa/contact` - è¯çµ¡é é¢

## ğŸ”§ è·¯ç”±æ•´åˆèˆ‡è¨­å®š

### Next.js è¨­å®š
```javascript
// next.config.js
const nextConfig = {
  async rewrites() {
    return [
      {
        source: "/spa/:path*",
        destination: "/spa",
      },
    ];
  },
};
```

æ­¤è¨­å®šç¢ºä¿æ‰€æœ‰ `/spa/*` è·¯å¾‘éƒ½é‡å®šå‘åˆ° `/spa` é é¢ï¼Œä½¿ React Router èƒ½æ­£ç¢ºè™•ç†è·¯ç”±ã€‚

### å»ºæ§‹çµæœ
å»ºæ§‹å¾Œæœƒç”Ÿæˆä»¥ä¸‹é—œéµæª”æ¡ˆï¼š
```
.
â”œâ”€â”€ 404.html      # æ‰¾ä¸åˆ°é é¢çš„éŒ¯èª¤é 
â”œâ”€â”€ 500.html      # ä¼ºæœå™¨éŒ¯èª¤é é¢
â”œâ”€â”€ _app.js       # Next.js æ‡‰ç”¨ç¨‹å¼é€²å…¥é»
â”œâ”€â”€ _document.js  # HTML æ–‡ä»¶çµæ§‹å®šç¾©
â”œâ”€â”€ doc.html      # docé é¢çš„éœæ…‹è¼¸å‡º
â”œâ”€â”€ index.html    # é¦–é çš„éœæ…‹è¼¸å‡º
â””â”€â”€ spa.html      # SPA é é¢çš„éœæ…‹è¼¸å‡º
```

## âš ï¸ æ³¨æ„äº‹é …

### è·¯ç”±è¡çªè™•ç†
ç•¶æ··åˆä½¿ç”¨ Next.js å’Œ React Router æ™‚ï¼Œå¯èƒ½æœƒé‡åˆ°ä»¥ä¸‹æƒ…æ³ï¼š
- SPA é€£çµåˆ° Next.js é é¢æ™‚ï¼Œç€è¦½å™¨ä¸Šä¸€é æŒ‰éˆ•å¯èƒ½å¤±æ•ˆ
- è§£æ±ºæ–¹æ¡ˆï¼šåœ¨ SPA ä¸­é€£çµåˆ° Next.js é é¢æ™‚ï¼Œä½¿ç”¨åŸç”Ÿ `<a href="/">` æ›¿ä»£ `<Link>`ï¼Œç¢ºä¿å®Œæ•´é é¢é‡è¼‰

### ä½¿ç”¨å»ºè­°
1. **Next.js Pages Router é©ç”¨æ–¼ï¼š**
   - éœ€è¦ SEO çš„å…¬é–‹é é¢
   - éœ€è¦ä¼ºæœå™¨ç«¯æ¸²æŸ“çš„å…§å®¹
   - åˆå§‹è¼‰å…¥é€Ÿåº¦é‡è¦çš„é é¢

2. **React Router é©ç”¨æ–¼ï¼š**
   - å¾Œå°ç®¡ç†ä»‹é¢
   - éœ€è¦æµæš¢ä½¿ç”¨è€…é«”é©—çš„åŠŸèƒ½å€
   - è¤‡é›œçš„å‰ç«¯äº’å‹•åŠŸèƒ½

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

1. **è·¯ç”±æ•´åˆ**
   - Next.js çš„é é¢è·¯ç”±ç”¨æ–¼ä¸»è¦çš„æ‡‰ç”¨æ¶æ§‹
   - React Router ç”¨æ–¼éœ€è¦ SPA é«”é©—çš„ç‰¹å®šå€åŸŸ

2. **ç‹€æ…‹ç®¡ç†**
   - ä½¿ç”¨ React Router çš„ `useLocation` å’Œ `useNavigate` é€²è¡Œ SPA è·¯ç”±æ§åˆ¶
   - ä½¿ç”¨ Next.js çš„ `useRouter` è™•ç†é é¢ç´šå°èˆª

## ğŸ› ï¸ æŠ€è¡“æ£§

- Next.js
- React Router
- TypeScript
- Tailwind CSS

## ğŸ“ æ³¨æ„äº‹é …
1. **SPA è·¯ç”±éœ€è¦åœ¨å®¢æˆ¶ç«¯æ¸²æŸ“å¾Œæ‰èƒ½æ­£å¸¸é‹ä½œï¼Œä¸”å¿…é ˆé¿å…åœ¨ SSR éšæ®µä½¿ç”¨åˆ° React Router**  
   - **åŸå› **ï¼šSingle-Page Application (SPA) ä¸»è¦ä¾é å®¢ç«¯ï¼ˆç€è¦½å™¨ï¼‰åŸ·è¡Œ JavaScript ä¾†åˆ‡æ›é é¢æˆ–çµ„ä»¶ã€‚
2. **æ‰€æœ‰ React Router åŒ…å«ç›¸é—œé‰¤å­éƒ½æ‡‰è©²è¢«åŒ…è£¹åœ¨ BrowserRouter / HashRouter / MemoryRouter ä¸­æ‰èƒ½æ­£å¸¸ä½¿ç”¨**  
   - **åŸå› **ï¼šReact Router çš„ `<Link>`, `useNavigate`, `useParams` ç­‰åŠŸèƒ½ï¼Œéƒ½ä¾è³´åœ¨ã€ŒRouter å®¹å™¨ã€å…§éƒ¨çš„ `context`ï¼›å¦‚æœä¸åœ¨å…¶å…§éƒ¨ä½¿ç”¨ï¼Œé€™äº›åŠŸèƒ½å°±ç„¡æ³•å–å¾—è·¯ç”±è³‡è¨Šæˆ–æ›´æ–°è·¯å¾‘ã€‚  

## åƒè€ƒè³‡æ–™
[building-a-spa-with-nextjs](https://colinhacks.com/essays/building-a-spa-with-nextjs)
